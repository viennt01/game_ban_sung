{"version":3,"sources":["assets\\scripts\\game\\bulletManagerComponent.ts"],"names":[],"mappings":";;;;;AAAM,IAAA,KAAwB,EAAE,CAAC,UAAU,EAAnC,OAAO,aAAA,EAAE,QAAQ,cAAkB,CAAC;AAG5C;IAAoD,0CAAY;IAAhE;QAAA,qEAuCC;QArCG,YAAM,GAAc,IAAI,CAAC;QAKzB,cAAQ,GAAiB,IAAI,CAAC;QAG9B,aAAO,GAAY,IAAI,CAAC,CAAC,gCAAgC;QAEzD,UAAI,GAAW,CAAC,CAAC;QACjB,UAAI,GAAW,CAAC,CAAC;;IA0BrB,CAAC;IAxBG,4CAAW,GAAX,UAAY,KAAK;QACb,IAAM,SAAS,GAAG,EAAE,CAAC,WAAW,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QAC9C,SAAS,CAAC,WAAW,CAAC,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,EAAE,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;QACxE,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC;QAE9B,wDAAwD;QACxD,IAAI,aAAa,GAAG,KAAK,CAAC,WAAW,EAAE,CAAC;QACxC,aAAa,GAAG,IAAI,CAAC,IAAI,CAAC,oBAAoB,CAAC,aAAa,CAAC,CAAC;QAC9D,IAAI,CAAC,IAAI,GAAG,aAAa,CAAC,CAAC,CAAC;QAC5B,IAAI,CAAC,IAAI,GAAG,aAAa,CAAC,CAAC,CAAC;QAE5B,IAAM,UAAU,GAAG,EAAE,CAAC,MAAM,CAAC,GAAG,EAAE,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;QAC/D,IAAM,aAAa,GAAG,EAAE,CAAC,QAAQ,CAAC;YAC9B,SAAS,CAAC,OAAO,EAAE,CAAC;QACxB,CAAC,EAAE,IAAI,CAAC,CAAC;QACT,IAAM,cAAc,GAAG,EAAE,CAAC,QAAQ,CAAC,UAAU,EAAE,aAAa,CAAC,CAAC;QAE9D,SAAS,CAAC,SAAS,CAAC,cAAc,CAAC,CAAC;QACpC,EAAE,CAAC,WAAW,CAAC,UAAU,CAAC,IAAI,CAAC,QAAQ,EAAE,KAAK,CAAC,CAAC;IACpD,CAAC;IAED,uCAAM,GAAN;QACI,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,WAAW,EAAE,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,CAAC;IACtD,CAAC;IApCD;QADC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;0DACK;IAKzB;QAHC,QAAQ,CAAC;YACN,IAAI,EAAE,EAAE,CAAC,SAAS;SACrB,CAAC;4DAC4B;IAG9B;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;2DACM;IAVP,sBAAsB;QAD1C,OAAO;OACa,sBAAsB,CAuC1C;IAAD,6BAAC;CAvCD,AAuCC,CAvCmD,EAAE,CAAC,SAAS,GAuC/D;kBAvCoB,sBAAsB","file":"","sourceRoot":"/","sourcesContent":["const { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class BulletManagerComponent extends cc.Component {\r\n    @property(cc.Prefab)\r\n    bullet: cc.Prefab = null;\r\n\r\n    @property({\r\n        type: cc.AudioClip\r\n    })\r\n    gunSound: cc.AudioClip = null;\r\n\r\n    @property(cc.Node)\r\n    soldier: cc.Node = null; // Tham chiếu tới nhân vật chính\r\n\r\n    posX: number = 0;\r\n    posY: number = 0;\r\n\r\n    spawnBullet(event) {\r\n        const newBullet = cc.instantiate(this.bullet);\r\n        newBullet.setPosition(this.soldier.position.x, this.soldier.position.y);\r\n        this.node.addChild(newBullet);\r\n\r\n        // Chuyển vị trí chuột sang tọa độ trong không gian node\r\n        let mousePosition = event.getLocation();\r\n        mousePosition = this.node.convertToNodeSpaceAR(mousePosition);\r\n        this.posX = mousePosition.x;\r\n        this.posY = mousePosition.y;\r\n\r\n        const actionMove = cc.moveTo(0.2, cc.v2(this.posX, this.posY));\r\n        const destroyBullet = cc.callFunc(() => {\r\n            newBullet.destroy();\r\n        }, this);\r\n        const actionSequence = cc.sequence(actionMove, destroyBullet);\r\n\r\n        newBullet.runAction(actionSequence);\r\n        cc.audioEngine.playEffect(this.gunSound, false);\r\n    }\r\n\r\n    onLoad() {\r\n        this.node.on('mousedown', this.spawnBullet, this);\r\n    }\r\n}\r\n"]}